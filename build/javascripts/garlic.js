!function(t){"use strict";var e=function(){this.defined="undefined"!=typeof localStorage?!0:!1};e.prototype={constructor:e,get:function(t,e){return localStorage.getItem(t)?localStorage.getItem(t):"undefined"!=typeof e?e:null},has:function(t){return localStorage.getItem(t)?!0:!1},set:function(t,e){return localStorage.setItem(t,e),!0},destroy:function(t){return localStorage.removeItem(t),!0},clean:function(){for(var t=localStorage.length-1;t>=0;t--)-1!==localStorage.key(t).indexOf("garlic:")&&localStorage.removeItem(localStorage.key(t));return!0},clear:function(){localStorage.clear()}};var n=function(t,e,n){this.init("garlic",t,e,n)};n.prototype={constructor:n,init:function(e,n,i,o){this.type=e,this.$element=t(n),this.options=this.getOptions(o),this.storage=i,this.path=this.$element.getPath(),this.retrieve(),this.$element.on(this.options.events.join("."+this.type+" "),!1,t.proxy(this.persist,this)),this.$element.closest("form").on("submit",!1,t.proxy(this.destroy,this)),this.$element.addClass("garlic-auto-save")},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,e,this.$element.data())},persist:function(){this.options.storage&&this.storage.set(this.path,this.$element.context.value)},retrieve:function(){this.storage.has(this.path)&&this.$element.val(this.storage.get(this.path))},destroy:function(){this.storage.destroy(this.path)},remove:function(){this.remove(),this.$element.val("")}},t.fn.getPath=function(){if(1!=this.length)return!1;for(var t,e=this;e.length;){var n=e[0],i=n.localName;if(!i)break;i=i.toLowerCase();var o=e.parent(),r=o.children(i);r.length>1&&(i+=":eq("+r.index(n)+")"),t=i+(t?">"+t:""),e=o}return"garlic:"+document.domain+">"+t},t.fn.garlic=function(o){function r(e){var i=t(e),r=i.data("garlic");r||i.data("garlic",r=new n(e,a,s)),"string"==typeof o&&"undefined"!=typeof r[o]&&r[o]()}var s=t.extend({},t.fn.garlic.defaults,o,this.data()),a=new e;return a.defined?(s.debug&&(window.garlicStorage=a),this.each(function(){t(this).is("form")&&t(this).find(s.inputs).each(function(){r(t(this))}),t(this).is(i.supportedInputs)&&r(t(this))})):!1},t.fn.garlic.Constructor=n;var i={supportedInputs:"input:text, textarea, select"};t.fn.garlic.defaults={debug:!1,storage:!0,inputs:"input:text, textarea",events:["DOMAttrModified","textInput","input","change","keypress","paste","focus"]},t(window).on("load",function(){t('[data-persist="garlic"]').each(function(){t(this).garlic()})})}(window.jQuery);